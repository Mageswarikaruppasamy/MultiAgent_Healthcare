{
  "name": "interrupt_agent",
  "version": "1.0.0",
  "description": "Handles general Q&A and interrupts during any interaction flow, providing contextual help and routing users back to main tasks",
  "type": "agent",
  "category": "general_assistance",
  "inputs": {
    "type": "object",
    "properties": {
      "user_id": {
        "type": "integer",
        "description": "User ID (optional for general questions)",
        "minimum": 1,
        "maximum": 100,
        "required": false
      },
      "query": {
        "type": "string",
        "description": "User's question or query",
        "maxLength": 1000,
        "required": true
      },
      "current_context": {
        "type": "object",
        "description": "Current conversation context",
        "properties": {
          "active_agent": {
            "type": "string",
            "enum": ["greeting", "mood_tracker", "cgm_agent", "food_intake", "meal_planner", "chat"],
            "description": "Currently active agent"
          },
          "user_authenticated": {
            "type": "boolean",
            "description": "Whether user is authenticated"
          },
          "last_action": {
            "type": "string",
            "description": "Last action performed"
          }
        },
        "required": false
      }
    },
    "required": ["query"]
  },
  "outputs": {
    "type": "object",
    "properties": {
      "success": {
        "type": "boolean",
        "description": "Whether the query was processed successfully"
      },
      "message": {
        "type": "string",
        "description": "Response to the user's query"
      },
      "question_type": {
        "type": "string",
        "enum": [
          "faq_diabetes", "faq_hypertension", "faq_nutrition", "faq_mood", "faq_exercise",
          "health_general", "app_help", "general_knowledge"
        ],
        "description": "Classified type of question"
      },
      "response_source": {
        "type": "string",
        "enum": ["faq", "llm_health", "llm_general", "app_help"],
        "description": "Source of the response"
      },
      "navigation_suggestion": {
        "type": "string",
        "description": "Suggestion for next actions based on context"
      },
      "continue_flow": {
        "type": "boolean",
        "description": "Whether user can continue with previous task",
        "default": true
      },
      "related_actions": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Suggested related actions user can take"
      }
    },
    "required": ["success", "message"]
  },
  "question_classification": {
    "faq_topics": {
      "diabetes": {
        "keywords": ["diabetes", "blood sugar", "glucose", "insulin", "diabetic", "a1c", "hemoglobin"],
        "priority": "high"
      },
      "hypertension": {
        "keywords": ["blood pressure", "hypertension", "high blood pressure", "bp", "systolic", "diastolic"],
        "priority": "high"
      },
      "nutrition": {
        "keywords": ["calories", "macros", "protein", "carbs", "carbohydrates", "fat", "vitamins", "minerals", "diet"],
        "priority": "medium"
      },
      "mood": {
        "keywords": ["mood", "depression", "anxiety", "stress", "mental health", "emotional", "feelings"],
        "priority": "medium"
      },
      "exercise": {
        "keywords": ["exercise", "workout", "physical activity", "fitness", "movement", "cardio", "strength"],
        "priority": "medium"
      }
    },
    "app_help_keywords": ["how to use", "navigate", "feature", "function", "help with app", "tutorial", "guide"],
    "health_general_keywords": ["health", "medical", "doctor", "symptoms", "treatment", "medication", "condition"]
  },
  "faq_database": {
    "diabetes": [
      "Diabetes management involves monitoring blood glucose, eating balanced meals, and following your healthcare provider's guidance.",
      "For Type 2 diabetes, focus on fiber-rich foods, lean proteins, and complex carbohydrates while limiting simple sugars.",
      "Regular glucose monitoring helps track how different foods and activities affect your blood sugar levels.",
      "The target blood glucose range for most adults with diabetes is 80-130 mg/dL before meals and less than 180 mg/dL after meals."
    ],
    "hypertension": [
      "Managing blood pressure often involves reducing sodium intake, eating potassium-rich foods, and maintaining a healthy weight.",
      "The DASH diet (rich in fruits, vegetables, and low-fat dairy) is particularly beneficial for blood pressure management.",
      "Regular exercise and stress management are important components of blood pressure control.",
      "Normal blood pressure is less than 120/80 mmHg. High blood pressure is 130/80 mmHg or higher."
    ],
    "nutrition": [
      "A balanced diet typically includes 45-65% carbohydrates, 20-35% fats, and 10-35% protein.",
      "Focus on whole foods: fruits, vegetables, lean proteins, whole grains, and healthy fats.",
      "Portion control and meal timing can be as important as food choices for health management.",
      "Reading nutrition labels helps you make informed choices about packaged foods."
    ],
    "mood": [
      "Diet can significantly impact mood. Foods rich in omega-3s, complex carbohydrates, and B-vitamins may help.",
      "Regular meal timing helps maintain stable blood sugar, which can support mood stability.",
      "If you're experiencing persistent mood changes, consider speaking with a healthcare professional.",
      "Physical activity, adequate sleep, and stress management techniques can all support emotional well-being."
    ],
    "exercise": [
      "Regular physical activity helps with glucose control, mood improvement, and overall health.",
      "Even light activities like walking after meals can help with blood sugar management.",
      "Always consult your healthcare provider before starting a new exercise program, especially with medical conditions.",
      "Aim for at least 150 minutes of moderate-intensity exercise per week, as recommended by health guidelines."
    ]
  },
  "app_help_responses": {
    "mood": "To track your mood, simply click on one of the emoji buttons that represents how you're feeling. I'll track your mood patterns over time and provide insights about your emotional well-being trends.",
    "glucose": "For glucose monitoring, you can either enter a reading manually in the input field or let me generate a realistic reading based on your health profile. The system will provide immediate feedback and recommendations.",
    "food": "To log food, describe what you ate in the text box - be as detailed as possible including portion sizes and cooking methods! I'll analyze the nutrition content using AI and provide recommendations.",
    "meal_plan": "To generate a meal plan, click the 'Generate Meal Plan' button. I'll create personalized recommendations based on your dietary preferences, medical conditions, and recent health data.",
    "dashboard": "The dashboard shows your health overview with charts for mood trends, glucose readings, and nutrition summaries. Use the quick action buttons to log data or generate meal plans.",
    "chat": "You can ask me questions about health, nutrition, app features, or general wellness. I'm here to provide helpful information and guide you through using the application.",
    "general": "I can help you track mood (emoji selection), monitor glucose (manual entry or AI generation), log food intake (with nutrition analysis), and generate personalized meal plans. Navigate using the sidebar tabs or ask me for guidance!"
  },
  "llm_integration": {
    "provider": "google_gemini",
    "model": "gemini-pro",
    "system_prompt": "You are a helpful healthcare assistant focused on general wellness, nutrition, and healthy lifestyle guidance. Guidelines: - Provide helpful, accurate information about nutrition, wellness, and general health topics - Always remind users that your advice doesn't replace professional medical consultation - Be encouraging and supportive - Keep responses concise but informative (2-3 sentences) - If asked about specific medical conditions or treatments, recommend consulting healthcare providers - Focus on evidence-based wellness practices. Context: This is part of a healthcare tracking application where users log mood, glucose readings, food intake, and get meal plans.",
    "health_disclaimer": "ðŸ’¡ Remember: This information is for educational purposes only and doesn't replace professional medical advice."
  },
  "navigation_suggestions": {
    "greeting": "How would you like to start? You can track mood, log glucose, record food, or get meal recommendations!",
    "mood_tracker": "Would you like to continue tracking your mood or explore other features like glucose monitoring or meal planning?",
    "cgm_agent": "Would you like to log another glucose reading, check your trends, or perhaps log some food intake?",
    "food_intake": "Would you like to log more food items, generate a meal plan based on your nutrition data, or track your mood?",
    "meal_planner": "Would you like to modify your meal plan, start tracking your food intake, or check your health dashboard?",
    "chat": "Is there anything else I can help you with? I'm here for mood tracking, glucose monitoring, food logging, and meal planning!",
    "default": "What would you like to do next? You can use the sidebar navigation or ask me for help with any health tracking features."
  },
  "contextual_routing": {
    "health_emergencies": {
      "keywords": ["emergency", "urgent", "chest pain", "severe", "911", "hospital"],
      "response": "ðŸš¨ If this is a medical emergency, please call emergency services (911) or contact your healthcare provider immediately. I'm not able to provide emergency medical assistance."
    },
    "medication_questions": {
      "keywords": ["medication", "prescription", "drug", "dosage", "side effects"],
      "response": "For questions about medications, dosages, or side effects, please consult your healthcare provider or pharmacist. They can provide personalized medical advice based on your specific situation."
    }
  },
  "error_handling": {
    "empty_query": {
      "message": "Please ask me a question! I can help with health topics, app navigation, or general wellness guidance.",
      "suggestions": ["How do I track my mood?", "What are healthy blood sugar levels?", "How can I log food intake?"]
    },
    "unclear_query": {
      "message": "I'm not sure I understand your question. Could you please rephrase it or be more specific?",
      "fallback_help": "I can help with mood tracking, glucose monitoring, food logging, meal planning, or general health questions."
    }
  },
  "examples": [
    {
      "input": {
        "user_id": 1,
        "query": "What are normal blood sugar levels?",
        "current_context": {
          "active_agent": "cgm_agent",
          "user_authenticated": true
        }
      },
      "output": {
        "success": true,
        "message": "Normal blood glucose levels are typically:\nâ€¢ Fasting: 70-100 mg/dL\nâ€¢ 2 hours after eating: less than 140 mg/dL\nâ€¢ Random: 70-140 mg/dL\n\nFor people with diabetes, target ranges may be different. Your healthcare provider can help determine your personal targets.\n\nðŸ’¡ Remember: This information is for educational purposes only and doesn't replace professional medical advice.",
        "question_type": "faq_diabetes",
        "response_source": "faq",
        "navigation_suggestion": "Would you like to log another glucose reading, check your trends, or perhaps log some food intake?",
        "continue_flow": true,
        "related_actions": ["log_glucose", "view_glucose_history", "generate_meal_plan"]
      }
    },
    {
      "input": {
        "query": "How do I track my mood in this app?",
        "current_context": {
          "active_agent": "dashboard",
          "user_authenticated": true
        }
      },
      "output": {
        "success": true,
        "message": "To track your mood, simply click on one of the emoji buttons that represents how you're feeling. I'll track your mood patterns over time and provide insights about your emotional well-being trends.",
        "question_type": "app_help",
        "response_source": "app_help",
        "navigation_suggestion": "What would you like to do next? You can use the sidebar navigation or ask me for help with any health tracking features.",
        "continue_flow": true,
        "related_actions": ["track_mood", "view_mood_trends", "dashboard_overview"]
      }
    },
    {
      "input": {
        "user_id": 1,
        "query": "I'm feeling stressed about my health lately",
        "current_context": {
          "active_agent": "chat",
          "user_authenticated": true
        }
      },
      "output": {
        "success": true,
        "message": "I understand that health concerns can be stressful. It's normal to feel this way, and taking steps to monitor and improve your health is actually very positive! Regular tracking through this app, maintaining good nutrition, and staying connected with your healthcare provider are all great strategies. Consider stress management techniques like deep breathing, gentle exercise, or talking to a counselor if the stress persists.\n\nðŸ’¡ Remember: This information is for educational purposes only and doesn't replace professional medical advice.",
        "question_type": "health_general",
        "response_source": "llm_health",
        "navigation_suggestion": "Is there anything else I can help you with? I'm here for mood tracking, glucose monitoring, food logging, and meal planning!",
        "continue_flow": true,
        "related_actions": ["track_mood", "generate_meal_plan", "view_health_summary"]
      }
    }
  ]
}